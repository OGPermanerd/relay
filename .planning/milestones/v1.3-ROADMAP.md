# Milestone v1.3: AI Quality & Cross-Platform

**Status:** ✅ SHIPPED 2026-02-04
**Phases:** 15-19
**Total Plans:** 15

## Overview

Add AI-driven skill review, semantic duplicate detection, fork-based versioning, and cross-platform install support.

## Phases

### Phase 15: Embeddings Foundation

**Goal**: Enable semantic search by generating and storing vector embeddings for all skill content
**Depends on**: Phase 14 (v1.2 complete)
**Requirements**: EMB-01, EMB-02, EMB-03, EMB-04
**Plans**: 4 plans

Plans:
- [x] 15-01-PLAN.md — Schema and pgvector infrastructure
- [x] 15-02-PLAN.md — Voyage AI embedding service
- [x] 15-03-PLAN.md — Hook embeddings into publish flow
- [x] 15-04-PLAN.md — Backfill existing skills

**Success Criteria:**
1. New skills automatically receive vector embeddings on publish
2. Existing skills have embeddings (backfill complete, verifiable via database query)
3. System can query similar skills by vector similarity (internal function works)
4. Embedding generation handles all skill formats (prompts, workflows, configs)

### Phase 16: Similarity Detection

**Goal**: Users see advisory warnings about similar existing skills when publishing
**Depends on**: Phase 15 (embeddings infrastructure)
**Requirements**: SIM-01, SIM-02, SIM-03, SIM-04
**Plans**: 2 plans

Plans:
- [x] 16-01-PLAN.md — Similar skills on publish flow (SIM-01, SIM-02, SIM-03)
- [x] 16-02-PLAN.md — Similar skills section on detail page (SIM-04)

**Success Criteria:**
1. User sees top 3 similar skills with similarity percentages when publishing a new skill
2. User can dismiss similarity warning and publish anyway
3. Skill detail page shows "Similar Skills" section with related skills
4. Similarity detection does not block publishing (advisory only)

### Phase 17: AI Review Pipeline

**Goal**: Users can trigger AI-powered quality reviews for skills
**Depends on**: Phase 15 (embeddings for context)
**Requirements**: REV-01, REV-02, REV-03
**Plans**: 3 plans

Plans:
- [x] 17-01-PLAN.md — Schema, service layer, and SDK installation
- [x] 17-02-PLAN.md — AI review generation library and server action
- [x] 17-03-PLAN.md — Tab UI, score display, and review trigger flow

**Success Criteria:**
1. User can click "Get AI Review" button on skill detail page
2. Review displays structured feedback (functionality score, quality score, improvement suggestions)
3. Review results are persisted and visible on subsequent visits
4. Review clearly marked as advisory (not blocking)

### Phase 18: Fork-Based Versioning

**Goal**: Users can create attributed variants of existing skills
**Depends on**: Phase 14 (independent of AI features)
**Requirements**: FORK-01, FORK-02, FORK-03, FORK-04
**Plans**: 2 plans

Plans:
- [x] 18-01-PLAN.md — Schema, service layer, fork action (FORK-01, FORK-04)
- [x] 18-02-PLAN.md — Fork UI: button, attribution, forks section (FORK-02, FORK-03)

**Success Criteria:**
1. User can fork any skill, creating a copy with "Forked from X" attribution displayed
2. Parent skill shows fork count
3. User can view list of all forks for any skill
4. Forked skill inherits parent's tags and category automatically

### Phase 19: Cross-Platform Install

**Goal**: Users can install skills on any supported Claude platform
**Depends on**: Phase 14 (independent of AI features)
**Requirements**: INST-01, INST-02, INST-03, INST-04
**Plans**: 2 plans

Plans:
- [x] 19-01-PLAN.md — Platform modal, config generation, OS detection, install scripts
- [x] 19-02-PLAN.md — Integration into all install entry points and E2E tests

**Success Criteria:**
1. User can copy MCP config for Claude Code (existing, verified working)
2. User can copy MCP config for Claude Desktop with correct OS-specific paths
3. Platform selection modal appears before copy, showing available platforms
4. System auto-detects user's OS and pre-selects appropriate platform

---

## Milestone Summary

**Key Decisions:**
- Voyage AI for embeddings (Anthropic-recommended, voyage-code-3 model)
- pgvector extension (stays within PostgreSQL, no new infrastructure)
- Advisory-only similarity detection (never blocking, high threshold 0.85+)
- On-demand AI review (not auto-trigger, manages costs)
- 1024 dimensions for voyage-code-3 model, HNSW index with cosine similarity
- Raw SQL for upsert/toggle due to Drizzle type inference limitation
- Simplified from 6 to 3 review categories (quality, clarity, completeness)
- Self-referential forkedFromId on skills table for fork tracking
- Fork attribution as subtitle with linked parent skill and author names
- All 4 platforms share identical MCP config, differ only in file path and instructions
- InstallButton self-contained with internal modal state (no props drilling)

**Issues Resolved:**
- Drizzle type inference limitation with boolean/timestamp default columns
- Manual JSON schema for output_config.format (zodOutputFormat requires Zod v4, project uses v3)
- Clipboard API not available in headless Chromium (fixed with context.grantPermissions)

**Technical Debt Incurred:**
- Similarity threshold needs empirical tuning (start at 0.85)
- Voyage AI is relatively new — store model version for future migration
- ANTHROPIC_API_KEY must be configured in .env.local before AI review features work

---

*For current project status, see .planning/ROADMAP.md*
