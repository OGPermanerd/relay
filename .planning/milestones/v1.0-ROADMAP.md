# Milestone v1.0: Relay MVP

**Status:** ✅ SHIPPED 2026-01-31
**Phases:** 1-8
**Total Plans:** 33

## Overview

Relay is an internal skill marketplace delivering Claude skills, prompts, workflows, and agent configurations with wiki-style contribution and metrics-driven quality. The roadmap built foundation first (auth), then integrated MCP early for usage tracking from the start, then layered web features (publishing, discovery, ratings). Each phase delivered a coherent, verifiable capability that enabled the next. Moving MCP Integration early ensured the core metric (FTE Days Saved = uses x hours) had real usage data from day one.

## Phases

### Phase 1: Project Foundation
**Goal:** Development environment is ready for feature implementation
**Depends on:** Nothing (first phase)
**Requirements:** INFR-01
**Plans:** 4 plans

Plans:
- [x] 01-01-PLAN.md - Scaffold monorepo with Turborepo, Next.js 15+, shared packages, linting
- [x] 01-02-PLAN.md - PostgreSQL Docker Compose and Drizzle ORM setup
- [x] 01-03-PLAN.md - GitHub Actions CI pipeline with lint, typecheck, test, build, E2E
- [x] 01-04-PLAN.md - Playwright E2E testing with webServer auto-start

### Phase 2: Authentication
**Goal:** Users can securely access the application with company credentials
**Depends on:** Phase 1
**Requirements:** AUTH-01, AUTH-02
**Plans:** 3 plans

Plans:
- [x] 02-01-PLAN.md - Auth.js v5 with Google provider and Drizzle adapter
- [x] 02-02-PLAN.md - Route protection middleware and login page
- [x] 02-03-PLAN.md - User profile page with contribution statistics placeholder

### Phase 3: MCP Integration
**Goal:** Users can deploy skills to Claude and usage is tracked automatically
**Depends on:** Phase 2
**Requirements:** MCP-01, MCP-02, MCP-03
**Plans:** 6 plans

Plans:
- [x] 03-01-PLAN.md - MCP server scaffold with TypeScript SDK and usageEvents schema
- [x] 03-02-PLAN.md - Skills schema and search/list tools with usage tracking
- [x] 03-03-PLAN.md - Deploy skill tool with usage tracking
- [x] 03-04-PLAN.md - MCP tools unit testing with Vitest
- [x] 03-05-PLAN.md - MCP integration documentation and Claude Desktop configuration
- [x] 03-06-PLAN.md - Database seed script and setup verification

### Phase 4: Data Model & Storage
**Goal:** Database schema supports all skill types with immutable versioning
**Depends on:** Phase 3
**Requirements:** SKIL-02
**Plans:** 5 plans

Plans:
- [x] 04-01-PLAN.md - Versioned schema (skillVersions + ratings tables, skills extensions)
- [x] 04-02-PLAN.md - R2 storage package with presigned URL helpers
- [x] 04-03-PLAN.md - Drizzle relations for type-safe nested queries
- [x] 04-04-PLAN.md - Multi-format skill validation with Zod schemas
- [x] 04-05-PLAN.md - Skill metrics service and database push

### Phase 5: Skill Publishing
**Goal:** Users can upload skills and view skill details
**Depends on:** Phase 4
**Requirements:** SKIL-01, SKIL-03
**Plans:** 3 plans

Plans:
- [x] 05-01-PLAN.md - Skill upload form with Server Action and slug utility
- [x] 05-02-PLAN.md - Skill detail page with usage statistics
- [x] 05-03-PLAN.md - R2 content storage integration with versioning

### Phase 6: Discovery
**Goal:** Users can find relevant skills through search and browse
**Depends on:** Phase 5
**Requirements:** DISC-01, DISC-02, DISC-03
**Plans:** 4 plans

Plans:
- [x] 06-01-PLAN.md - PostgreSQL full-text search with generated tsvector column and searchSkills function
- [x] 06-02-PLAN.md - Skill card components with react-sparklines for FTE Days Saved trends
- [x] 06-03-PLAN.md - nuqs URL state management with SearchInput, CategoryFilter, TagFilter components
- [x] 06-04-PLAN.md - Skills browse page with empty states and home page navigation update

### Phase 7: Ratings & Reviews
**Goal:** Users can rate skills and provide time-saved feedback
**Depends on:** Phase 6
**Requirements:** RATE-01, RATE-02
**Plans:** 3 plans

Plans:
- [x] 07-01-PLAN.md - Rating Server Action and form components (star input, rating form)
- [x] 07-02-PLAN.md - Reviews list component and skill detail page integration
- [x] 07-03-PLAN.md - User time estimate override for FTE calculation and display

### Phase 8: Metrics & Analytics
**Goal:** Platform shows value through FTE Days Saved and surfaces quality content
**Depends on:** Phase 7
**Requirements:** RATE-03, RATE-04, DISC-04, AUTH-03
**Plans:** 5 plans

Plans:
- [x] 08-01-PLAN.md - Platform statistics service with aggregation queries
- [x] 08-02-PLAN.md - Platform dashboard with stats, trending, and leaderboard
- [x] 08-03-PLAN.md - Trending algorithm with time-decay formula
- [x] 08-04-PLAN.md - Contributor leaderboard with RANK() window function
- [x] 08-05-PLAN.md - Profile statistics with real user data

---

## Milestone Summary

**Key Decisions:**
- MCP Integration moved to Phase 3 (from Phase 8) to enable usage tracking from day one
- JWT session strategy for Auth.js - required for Edge middleware compatibility
- Split auth config pattern - auth.config.ts (Edge) + auth.ts (Node with adapter)
- Wiki-style versioning: new versions create records, never modify existing
- Denormalized totalUses for display performance - query skill.totalUses rather than counting usageEvents
- FTE Days Saved formula: (totalUses * hoursSaved) / 8, rounded to 1 decimal
- Hacker News time-decay formula for trending: (recent_uses - 1) / (age_hours + 2)^1.8
- Use RANK() over DENSE_RANK() for leaderboards - gaps in ranking acceptable

**Issues Resolved:**
- ESM/CJS type conflicts in monorepo via split imports for drizzle
- Edge runtime compatibility via JWT sessions and split auth config
- Circular FK between skills and skillVersions via insert → version → update pattern
- MCP usage tracking integration (incrementSkillUses call added)

**Technical Debt Remaining:**
- Tag filtering UI exists but backend returns empty array
- Limited E2E test coverage (login page only)
- usageEvents retention policy not implemented

---

*Archived: 2026-01-31 as part of v1.0 milestone completion*
*For current project status, see .planning/ROADMAP.md*
