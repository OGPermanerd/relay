# Requirements Archive: v2.0 Skill Ecosystem

**Archived:** 2026-02-08
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

## v2.0 Requirements

### Review Pipeline

- [x] **RVPL-01**: Skill creation sets status to `draft` instead of auto-publishing
- [x] **RVPL-02**: Author can submit a draft skill for review, transitioning status to `pending_review`
- [x] **RVPL-03**: AI review triggers automatically on submit-for-review with explicit error handling (not fire-and-forget)
- [x] **RVPL-04**: AI review completion transitions skill to `ai_reviewed` status
- [x] **RVPL-05**: State machine enforces valid transitions: draft -> pending_review -> ai_reviewed -> approved/rejected/changes_requested -> published
- [x] **RVPL-06**: All 8+ existing skill query paths filter by `status = 'published'` to prevent pending skills from appearing in search/browse
- [x] **RVPL-07**: MCP `create_skill` tool creates skills as `draft` with response message explaining review process
- [x] **RVPL-08**: MCP `list_skills` and `search_skills` only return published skills
- [x] **RVPL-09**: Skill detail page shows 404 for non-author/non-admin users when skill is not published
- [x] **RVPL-10**: Existing published skills retain `published` status after migration (backward compatible)
- [x] **RVPL-11**: Skills with all AI review scores >= configurable threshold auto-approve (skip admin queue)
- [x] **RVPL-12**: Author can view their own draft/pending/rejected skills on a "My Skills" page

### Admin Review

- [x] **ADMR-01**: Admin review queue page at `/admin/reviews` lists skills with pending review status
- [x] **ADMR-02**: Review queue supports pagination (20 per page) and filtering by status/category/date
- [x] **ADMR-03**: Admin can approve a skill, transitioning it to `approved` then `published` with publishedVersionId set
- [x] **ADMR-04**: Admin can reject a skill with required notes explaining the reason
- [x] **ADMR-05**: Admin can request changes with feedback notes, transitioning to `changes_requested`
- [x] **ADMR-06**: Admin review page shows AI review scores (quality/clarity/completeness) to inform decision
- [x] **ADMR-07**: Admin review page shows skill content with diff view against previous version (if exists)
- [x] **ADMR-08**: Review decisions stored immutably for audit trail (reviewer, action, timestamp, notes)
- [x] **ADMR-09**: Review queue count shown in admin sidebar/nav

### Review Notifications

- [x] **RVNT-01**: Admins notified (in-app + email) when a skill is submitted for review
- [x] **RVNT-02**: Author notified (in-app + email) when skill is approved
- [x] **RVNT-03**: Author notified (in-app + email) when skill is rejected (includes admin notes)
- [x] **RVNT-04**: Author notified (in-app + email) when changes are requested (includes admin feedback)
- [x] **RVNT-05**: Author notified (in-app + email) when skill is published
- [x] **RVNT-06**: Review notifications grouped under single preference toggle (reviewNotificationsEmail/InApp)
- [x] **RVNT-07**: Notification bell UI handles new review notification types with appropriate icons and action URLs

### MCP Discovery

- [x] **DISC-01**: `recommend_skills` MCP tool performs semantic search using Ollama embeddings + pgvector cosine similarity
- [x] **DISC-02**: `describe_skill` MCP tool returns full skill details including AI review scores, ratings, usage stats, and similar skills
- [x] **DISC-03**: `guide_skill` MCP tool returns usage guidance and contextual instructions after skill installation
- [x] **DISC-04**: `search_skills` enhanced with richer metadata (ratings, quality tier, install count) in responses
- [x] **DISC-05**: Semantic search falls back gracefully to ILIKE text search when Ollama is unavailable
- [x] **DISC-06**: Semantic search only returns published skills (status filter in vector queries)

### MCP Review Tools

- [x] **MCPR-01**: `review_skill` MCP tool triggers AI review from within Claude conversation, returns scores and suggestions
- [x] **MCPR-02**: `submit_for_review` MCP tool submits a draft skill for admin review via MCP
- [x] **MCPR-03**: `check_review_status` MCP tool returns current review status of author's submitted skills

### Fork Detection

- [x] **FORK-01**: `check_skill_status` MCP tool compares local file content hash against DB published version hash
- [x] **FORK-02**: Hash comparison strips YAML frontmatter before hashing (tracking hooks should not trigger false drift)
- [x] **FORK-03**: `update_skill` MCP tool pushes local modifications back as new version (if author) or creates fork (if not author)
- [x] **FORK-04**: `forkedAtContentHash` column stored on skills at fork time as anchor for modification detection
- [x] **FORK-05**: Fork creation updated to create skill_version record and set proper status (not orphaned)
- [x] **FORK-06**: Web UI on skill detail page shows drift indicator when fork has diverged from parent
- [x] **FORK-07**: Web UI side-by-side comparison page at `/skills/[slug]/compare` shows fork content vs parent content

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| RVPL-01 | Phase 34 | Complete |
| RVPL-02 | Phase 34 | Complete |
| RVPL-03 | Phase 35 | Complete |
| RVPL-04 | Phase 35 | Complete |
| RVPL-05 | Phase 34 | Complete |
| RVPL-06 | Phase 34 | Complete |
| RVPL-07 | Phase 34 | Complete |
| RVPL-08 | Phase 34 | Complete |
| RVPL-09 | Phase 34 | Complete |
| RVPL-10 | Phase 34 | Complete |
| RVPL-11 | Phase 35 | Complete |
| RVPL-12 | Phase 34 | Complete |
| ADMR-01 | Phase 36 | Complete |
| ADMR-02 | Phase 36 | Complete |
| ADMR-03 | Phase 36 | Complete |
| ADMR-04 | Phase 36 | Complete |
| ADMR-05 | Phase 36 | Complete |
| ADMR-06 | Phase 36 | Complete |
| ADMR-07 | Phase 36 | Complete |
| ADMR-08 | Phase 36 | Complete |
| ADMR-09 | Phase 36 | Complete |
| RVNT-01 | Phase 37 | Complete |
| RVNT-02 | Phase 37 | Complete |
| RVNT-03 | Phase 37 | Complete |
| RVNT-04 | Phase 37 | Complete |
| RVNT-05 | Phase 37 | Complete |
| RVNT-06 | Phase 37 | Complete |
| RVNT-07 | Phase 37 | Complete |
| DISC-01 | Phase 38 | Complete |
| DISC-02 | Phase 38 | Complete |
| DISC-03 | Phase 38 | Complete |
| DISC-04 | Phase 38 | Complete |
| DISC-05 | Phase 38 | Complete |
| DISC-06 | Phase 38 | Complete |
| MCPR-01 | Phase 35 | Complete |
| MCPR-02 | Phase 35 | Complete |
| MCPR-03 | Phase 35 | Complete |
| FORK-01 | Phase 39 | Complete |
| FORK-02 | Phase 39 | Complete |
| FORK-03 | Phase 39 | Complete |
| FORK-04 | Phase 39 | Complete |
| FORK-05 | Phase 39 | Complete |
| FORK-06 | Phase 39 | Complete |
| FORK-07 | Phase 39 | Complete |

---

## Milestone Summary

**Shipped:** 44 of 44 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-02-08 as part of v2.0 milestone completion*
