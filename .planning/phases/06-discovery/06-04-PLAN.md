---
phase: 06-discovery
plan: 04
type: execute
wave: 2
depends_on: ["06-02"]
files_modified:
  - apps/web/app/(protected)/skills/page.tsx
  - apps/web/components/empty-state.tsx
  - apps/web/app/(protected)/page.tsx
autonomous: true

must_haves:
  truths:
    - "Skills browse page displays search input, category filter, and skill cards"
    - "Page fetches skills based on URL searchParams (q, category, tags)"
    - "Empty state guides users when no skills match or none exist"
    - "Home page Browse Skills card links to /skills (no longer disabled)"
  artifacts:
    - path: "apps/web/app/(protected)/skills/page.tsx"
      provides: "Main skills browse/search page"
      exports: ["default"]
    - path: "apps/web/components/empty-state.tsx"
      provides: "Empty state component with guidance"
      exports: ["EmptyState"]
  key_links:
    - from: "apps/web/app/(protected)/skills/page.tsx"
      to: "apps/web/lib/search-skills.ts"
      via: "imports and calls searchSkills"
      pattern: "import.*searchSkills"
    - from: "apps/web/app/(protected)/skills/page.tsx"
      to: "apps/web/components/skill-list.tsx"
      via: "renders SkillList with results"
      pattern: "<SkillList"
---

<objective>
Create the skills browse/search page with empty states and update home page navigation.

Purpose: Provide users with a discoverable skills catalog with search, filter, and browse capabilities.
Output: Fully functional /skills page with search, categories, skill cards, and helpful empty states.
</objective>

<execution_context>
@/home/claude/.claude/get-shit-done/workflows/execute-plan.md
@/home/claude/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-discovery/06-RESEARCH.md
@.planning/phases/06-discovery/06-02-SUMMARY.md

# Existing files to modify/reference
@apps/web/app/(protected)/page.tsx
@apps/web/components/skill-list.tsx
@apps/web/components/skill-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EmptyState component</name>
  <files>apps/web/components/empty-state.tsx</files>
  <action>
Create apps/web/components/empty-state.tsx:

```typescript
import Link from "next/link";

type EmptyStateType = "no-results" | "no-skills" | "empty-category";

interface EmptyStateProps {
  type: EmptyStateType;
  query?: string;
  category?: string;
  onClearFilters?: () => void;
}

const CONTENT: Record<
  EmptyStateType,
  {
    title: string;
    getDescription: (props: EmptyStateProps) => string;
    suggestions: string[] | null;
    action: { label: string; href?: string } | null;
  }
> = {
  "no-results": {
    title: "No skills found",
    getDescription: (props) =>
      props.query
        ? `We couldn't find any skills matching "${props.query}"`
        : "Try adjusting your filters",
    suggestions: ["Try different keywords", "Browse by category", "Check spelling"],
    action: null, // Clear filters action handled by prop
  },
  "no-skills": {
    title: "No skills yet",
    getDescription: () => "Be the first to share a skill with your team",
    suggestions: null,
    action: { label: "Share a skill", href: "/skills/new" },
  },
  "empty-category": {
    title: "No skills in this category",
    getDescription: (props) =>
      `There are no ${props.category || "matching"} skills yet`,
    suggestions: ["Try another category", "Search for related skills"],
    action: { label: "Share a skill", href: "/skills/new" },
  },
};

/**
 * Empty state component with contextual guidance
 *
 * Provides helpful next steps when:
 * - Search returns no results
 * - No skills exist in the system
 * - A category has no skills
 */
export function EmptyState({ type, query, category, onClearFilters }: EmptyStateProps) {
  const content = CONTENT[type];
  const description = content.getDescription({ type, query, category });

  return (
    <div className="flex flex-col items-center py-12 text-center">
      {/* Search icon */}
      <div className="rounded-full bg-gray-100 p-4">
        <svg
          className="h-8 w-8 text-gray-400"
          fill="none"
          viewBox="0 0 24 24"
          strokeWidth={1.5}
          stroke="currentColor"
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
          />
        </svg>
      </div>

      {/* Title and description */}
      <h2 className="mt-4 text-lg font-semibold text-gray-900">{content.title}</h2>
      <p className="mt-2 max-w-sm text-gray-600">{description}</p>

      {/* Action button */}
      {type === "no-results" && onClearFilters ? (
        <button
          onClick={onClearFilters}
          className="mt-4 rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200"
        >
          Clear filters
        </button>
      ) : content.action?.href ? (
        <Link
          href={content.action.href}
          className="mt-4 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700"
        >
          {content.action.label}
        </Link>
      ) : null}

      {/* Suggestions */}
      {content.suggestions && (
        <ul className="mt-6 space-y-1 text-sm text-gray-500">
          {content.suggestions.map((suggestion, i) => (
            <li key={i} className="flex items-center gap-2">
              <span className="text-gray-300">â€¢</span>
              {suggestion}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

Implementation notes:
- Three distinct empty states with contextual messaging
- Clear filters action is a callback (client-side)
- Share skill action links to /skills/new
- Suggestions guide users to alternative actions
  </action>
  <verify>
Run `pnpm --filter web typecheck` - should pass.
  </verify>
  <done>
EmptyState component exported with three types: no-results, no-skills, empty-category.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create skills browse page</name>
  <files>apps/web/app/(protected)/skills/page.tsx</files>
  <action>
Create apps/web/app/(protected)/skills/page.tsx:

```typescript
import { searchSkills, getAvailableTags } from "@/lib/search-skills";
import { getUsageTrends } from "@/lib/usage-trends";
import { SkillList } from "@/components/skill-list";
import { SearchInput } from "@/components/search-input";
import { CategoryFilter } from "@/components/category-filter";
import { TagFilter } from "@/components/tag-filter";
import { EmptyState } from "@/components/empty-state";
import { ClearFiltersButton } from "./clear-filters-button";

interface SkillsPageProps {
  searchParams: Promise<{
    q?: string;
    category?: string;
    tags?: string;
  }>;
}

export default async function SkillsPage({ searchParams }: SkillsPageProps) {
  const params = await searchParams;

  // Parse search parameters
  const query = params.q || "";
  const category = params.category || undefined;
  const tags = params.tags ? params.tags.split(",") : [];

  // Fetch skills and available tags
  const [skills, availableTags] = await Promise.all([
    searchSkills({ query, category, tags }),
    getAvailableTags(),
  ]);

  // Fetch usage trends for sparklines (batched query)
  const skillIds = skills.map((s) => s.id);
  const usageTrends = await getUsageTrends(skillIds);

  // Determine empty state type
  const hasFilters = query || category || tags.length > 0;
  const emptyStateType = skills.length === 0
    ? hasFilters
      ? category && !query
        ? "empty-category"
        : "no-results"
      : "no-skills"
    : null;

  return (
    <div className="mx-auto max-w-6xl px-4 py-8">
      {/* Header */}
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900">Browse Skills</h1>
        <p className="mt-1 text-gray-600">
          Discover skills shared by your colleagues
        </p>
      </div>

      {/* Search and Filters */}
      <div className="mb-6 space-y-4">
        <SearchInput />
        <CategoryFilter />
        {availableTags.length > 0 && <TagFilter availableTags={availableTags} />}
      </div>

      {/* Results count */}
      {skills.length > 0 && (
        <p className="mb-4 text-sm text-gray-500">
          {skills.length} skill{skills.length !== 1 ? "s" : ""} found
        </p>
      )}

      {/* Skills grid or empty state */}
      {emptyStateType ? (
        <EmptyState
          type={emptyStateType}
          query={query}
          category={category}
        />
      ) : (
        <SkillList skills={skills} usageTrends={usageTrends} />
      )}

      {/* Clear filters (client component) */}
      {hasFilters && skills.length === 0 && <ClearFiltersButton />}
    </div>
  );
}
```

Also create the client component for clearing filters at apps/web/app/(protected)/skills/clear-filters-button.tsx:

```typescript
"use client";

import { useRouter } from "next/navigation";

/**
 * Client component to clear all search filters
 *
 * Navigates to /skills without any query parameters
 */
export function ClearFiltersButton() {
  const router = useRouter();

  const handleClear = () => {
    router.push("/skills");
  };

  return (
    <div className="mt-4 text-center">
      <button
        onClick={handleClear}
        className="text-sm text-blue-600 hover:text-blue-800 hover:underline"
      >
        Clear all filters
      </button>
    </div>
  );
}
```

Implementation notes:
- Server component for initial data fetch
- Uses Promise.all for parallel data fetching
- getUsageTrends batches sparkline data
- Determines correct empty state type based on context
- ClearFiltersButton is a separate client component
  </action>
  <verify>
Run `pnpm --filter web typecheck` - should pass.
Run `pnpm --filter web build` - should complete without errors.
  </verify>
  <done>
Skills browse page at /skills with search, category filter, skill cards, and empty states.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update home page to link to /skills</name>
  <files>apps/web/app/(protected)/page.tsx</files>
  <action>
Update apps/web/app/(protected)/page.tsx to enable the Browse Skills navigation card.

Find the navigationCards array and update the Browse Skills entry:
1. Change `href: "#"` to `href: "/skills"`
2. Remove `disabled: true` property

The updated Browse Skills card should be:
```typescript
{
  title: "Browse Skills",
  description: "Discover skills shared by your colleagues",
  href: "/skills",
  icon: (
    <svg
      className="h-6 w-6"
      fill="none"
      viewBox="0 0 24 24"
      strokeWidth={1.5}
      stroke="currentColor"
    >
      <path
        strokeLinecap="round"
        strokeLinejoin="round"
        d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
      />
    </svg>
  ),
},
```

Also update the rendering logic to remove the disabled-specific styling:
- Remove the conditional disabled check in the className
- Remove the onClick handler that prevents navigation when disabled
- Remove the "Coming soon" span rendering

The card should use the same styling as the other active cards.
  </action>
  <verify>
Run `pnpm --filter web typecheck` - should pass.
Inspect the file to confirm Browse Skills card has href="/skills" and no disabled property.
  </verify>
  <done>
Home page Browse Skills card links to /skills and is no longer disabled.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` - All packages pass type checking
2. `pnpm --filter web build` - Web app builds successfully
3. Navigate to /skills - shows search input, category filter, and any existing skills
4. Search for non-existent term - shows "No skills found" empty state
5. Home page Browse Skills card navigates to /skills
</verification>

<success_criteria>
- Skills page at /skills displays search, category filter, and skill cards
- Search updates URL and filters results
- Category filter updates URL and filters results
- Empty states show appropriate guidance (no-results, no-skills, empty-category)
- Skill cards show name, author, rating, uses, FTE days sparkline
- Home page Browse Skills card links to /skills
- All components pass typecheck and build
</success_criteria>

<output>
After completion, create `.planning/phases/06-discovery/06-04-SUMMARY.md`
</output>
