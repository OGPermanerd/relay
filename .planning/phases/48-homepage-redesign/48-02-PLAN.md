---
phase: 48-homepage-redesign
plan: 02
type: execute
wave: 2
depends_on: ["48-01"]
files_modified:
  - apps/web/app/(protected)/my-leverage/page.tsx
  - apps/web/app/(protected)/page.tsx
autonomous: true
must_haves:
  truths:
    - "User can visit /my-leverage and see their full leverage dashboard (skills used + skills created)"
    - "Mini leverage widget on homepage links to /my-leverage and navigates correctly"
    - "My Leverage page shows same data as the old tab view: usage timeline, created skills, all stat cards"
  artifacts:
    - path: "apps/web/app/(protected)/my-leverage/page.tsx"
      provides: "Dedicated My Leverage page with full stats, timeline, and created skills"
      contains: "MyLeverageView"
  key_links:
    - from: "apps/web/app/(protected)/my-leverage/page.tsx"
      to: "apps/web/components/my-leverage-view.tsx"
      via: "import and render with fetched data"
      pattern: "MyLeverageView"
    - from: "apps/web/components/mini-leverage-widget.tsx"
      to: "/my-leverage"
      via: "Link component href"
      pattern: "href.*my-leverage"
---

<objective>
Create a dedicated /my-leverage page that hosts the full My Leverage dashboard previously available as a homepage tab.

Purpose: The homepage tab system is removed (Plan 01). The full leverage view needs a permanent home so users can still access their detailed usage timeline, created skills list, and all stat cards.

Output: New route at /my-leverage rendering the existing MyLeverageView component with server-fetched data.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@apps/web/components/my-leverage-view.tsx
@apps/web/lib/my-leverage.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create /my-leverage page route</name>
  <files>apps/web/app/(protected)/my-leverage/page.tsx</files>
  <action>
Create `apps/web/app/(protected)/my-leverage/page.tsx` as a server component (async function):

**Auth guard:**
- Import `auth` from `@/auth`, call `await auth()`, redirect to `/login` if no session

**Data fetching** -- replicate the data fetching from the old homepage tab:
```
const [skillsUsedResult, skillsUsedStats, skillsCreatedResult, skillsCreatedStats] = await Promise.all([
  getSkillsUsed(user.id!),
  getSkillsUsedStats(user.id!),
  getSkillsCreated(user.id!),
  getSkillsCreatedStats(user.id!),
]);
```

**Serialize timestamps** for client component (same pattern as old homepage):
```
const serializedSkillsUsed = skillsUsedResult.items.map((entry) => ({
  ...entry,
  timestamp: entry.timestamp.toISOString(),
}));
```

**Render:**
- Page title: "My Leverage" as h1 with subtitle "Track your impact -- skills you use and skills you create"
- Breadcrumb-style back link: Link to "/" with "Back to Home" text
- Render `MyLeverageView` with all props: `skillsUsed={serializedSkillsUsed}`, `skillsUsedStats`, `skillsCreated={skillsCreatedResult.items}`, `skillsCreatedStats`, `skillsUsedTotal={skillsUsedResult.total}`
- Wrap in `max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8` container (same as homepage)

**Imports:**
- `auth` from `@/auth`
- `redirect` from `next/navigation`
- `Link` from `next/link`
- `getSkillsUsed`, `getSkillsUsedStats`, `getSkillsCreated`, `getSkillsCreatedStats` from `@/lib/my-leverage`
- `MyLeverageView` from `@/components/my-leverage-view`

**Export metadata:**
```
export const metadata = { title: "My Leverage | EverySkill" };
```
  </action>
  <verify>
1. `cd /home/dev/projects/relay/apps/web && npx tsc --noEmit` -- no type errors
2. Start dev server, visit http://localhost:2002/my-leverage -- page loads with leverage dashboard
3. Click "Back to Home" link -- navigates to homepage
  </verify>
  <done>
/my-leverage page renders the full MyLeverageView with all stats, timeline, and created skills. The mini leverage widget on homepage links to /my-leverage and navigates correctly.
  </done>
</task>

</tasks>

<verification>
1. `cd /home/dev/projects/relay/apps/web && npx tsc --noEmit` -- zero type errors
2. Visit http://localhost:2002/my-leverage -- full leverage dashboard renders
3. Visit http://localhost:2002 -- mini leverage widget shows, clicking "View full details" goes to /my-leverage
4. Run Playwright tests: `cd /home/dev/projects/relay/apps/web && npx playwright test`
</verification>

<success_criteria>
- /my-leverage page exists and renders the full MyLeverageView component
- Page is auth-protected (redirects to /login without session)
- All leverage data (skills used timeline, skills created list, stat cards) displays correctly
- Navigation from homepage mini widget to /my-leverage works
</success_criteria>

<output>
After completion, create `.planning/phases/48-homepage-redesign/48-02-SUMMARY.md`
</output>
