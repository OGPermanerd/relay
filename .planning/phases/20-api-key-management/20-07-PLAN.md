---
phase: 20-api-key-management
plan: 07
type: execute
wave: 5
depends_on: ["20-06"]
files_modified:
  - apps/web/app/(protected)/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Admin nav link only visible to admin users"
    - "Playwright tests pass on home and profile pages"
  artifacts:
    - path: "apps/web/app/(protected)/layout.tsx"
      contains: "isAdmin"
---

<objective>
Add conditional admin nav link in the header layout and run Playwright tests.
</objective>

<execution_context>
@/home/dev/.claude/get-shit-done/workflows/execute-plan.md
@/home/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<tasks>

<task type="auto">
  <name>Add admin nav link to layout</name>
  <files>apps/web/app/(protected)/layout.tsx</files>
  <action>
Edit `apps/web/app/(protected)/layout.tsx`:

1. Add import: `import { isAdmin } from "@/lib/admin";`

2. Inside the `<nav className="hidden sm:flex sm:gap-6">`, after the Profile link (line ~43), add:
```tsx
{isAdmin(user.email) && (
  <Link href="/admin/keys" className="text-sm font-medium text-gray-600 transition hover:text-gray-900">
    Admin
  </Link>
)}
```

After implementing, run:
```bash
cd /home/dev/projects/relay/apps/web && node_modules/.bin/playwright test tests/e2e/home.spec.ts tests/e2e/profile.spec.ts
```
  </action>
  <verify>
1. `cd /home/dev/projects/relay/apps/web && node_modules/.bin/playwright test tests/e2e/home.spec.ts tests/e2e/profile.spec.ts` passes
2. TypeScript compiles
  </verify>
  <done>Admin nav link in header, visible only to admins. Playwright passes.</done>
</task>

</tasks>

<verification>
1. Admin link conditional on isAdmin
2. Playwright tests pass
3. TypeScript compiles
</verification>

<success_criteria>
- Admin link in nav for admin users only
- Playwright passes
</success_criteria>

<output>
After completion, create `.planning/phases/20-api-key-management/20-07-SUMMARY.md`
</output>
