---
phase: 03-mcp-integration
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/mcp/README.md
  - apps/mcp/claude_desktop_config.example.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "README documents how to register everyskill-mcp with Claude Desktop"
    - "Example configuration file exists for Claude Desktop"
    - "User understands prerequisite: build the MCP server before configuration"
  artifacts:
    - path: "apps/mcp/README.md"
      provides: "Installation and configuration instructions"
      min_lines: 40
    - path: "apps/mcp/claude_desktop_config.example.json"
      provides: "Template for Claude Desktop MCP configuration"
      contains: "everyskill-mcp"
  key_links:
    - from: "apps/mcp/README.md"
      to: "~/.claude/claude_desktop_config.json"
      via: "copy instructions"
      pattern: "claude_desktop_config"
---

<objective>
Create documentation and configuration templates for integrating everyskill-mcp with Claude Desktop.

Purpose: Close verification gap - tools exist but users cannot invoke them because no configuration/documentation exists for connecting Claude Desktop to the MCP server.

Output: README.md with installation instructions and example Claude Desktop configuration file.
</objective>

<execution_context>
@/home/claude/.claude/get-shit-done/workflows/execute-plan.md
@/home/claude/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-mcp-integration/03-VERIFICATION.md
@apps/mcp/package.json
@apps/mcp/src/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Claude Desktop configuration example</name>
  <files>apps/mcp/claude_desktop_config.example.json</files>
  <action>
Create an example Claude Desktop configuration file that users can copy to ~/.claude/claude_desktop_config.json.

The configuration must:
1. Use the "mcpServers" key (Claude Desktop's expected format)
2. Register "everyskill-mcp" as the server name
3. Use "node" command with absolute path placeholder to dist/index.js
4. Include comment explaining path customization needed

Format (JSON with comments not supported, use README for explanation):
```json
{
  "mcpServers": {
    "everyskill-mcp": {
      "command": "node",
      "args": ["/path/to/relay/apps/mcp/dist/index.js"]
    }
  }
}
```

Note: User must replace "/path/to/relay" with their actual repository path.
  </action>
  <verify>File exists at apps/mcp/claude_desktop_config.example.json with valid JSON structure</verify>
  <done>Example configuration file contains mcpServers.everyskill-mcp with command and args</done>
</task>

<task type="auto">
  <name>Task 2: Create comprehensive README for MCP installation</name>
  <files>apps/mcp/README.md</files>
  <action>
Create README.md with the following sections:

# @everyskill/mcp

Brief description: MCP server exposing Relay skill marketplace tools to Claude Desktop.

## Available Tools

- **list_skills**: List all skills, optionally filtered by category
- **search_skills**: Search skills by name or description
- **deploy_skill**: Get skill content for deployment to .claude/skills/

## Prerequisites

- Node.js 22+
- Built MCP server (run from monorepo root)

## Installation

### 1. Build the MCP Server

```bash
# From repository root
pnpm install
pnpm --filter @everyskill/mcp build
```

### 2. Configure Claude Desktop

Copy the example configuration:

```bash
cp apps/mcp/claude_desktop_config.example.json ~/.claude/claude_desktop_config.json
```

Edit `~/.claude/claude_desktop_config.json` and replace `/path/to/relay` with your actual repository path.

Example for a repo at `/home/user/projects/relay`:

```json
{
  "mcpServers": {
    "everyskill-mcp": {
      "command": "node",
      "args": ["/home/user/projects/relay/apps/mcp/dist/index.js"]
    }
  }
}
```

### 3. Restart Claude Desktop

Restart Claude Desktop to load the new MCP server configuration.

### 4. Verify Installation

In Claude Desktop, you should now see the everyskill-mcp tools available. Try:

- "List all skills" - should invoke list_skills
- "Search for code review" - should invoke search_skills
- "Deploy skill X" - should invoke deploy_skill

## Development

```bash
# Run in development mode (with hot reload)
pnpm --filter @everyskill/mcp dev

# Run tests
pnpm --filter @everyskill/mcp test

# Type check
pnpm --filter @everyskill/mcp typecheck
```

## Database Requirements

The MCP server requires a PostgreSQL database with the skills and usageEvents tables.
Set DATABASE_URL in your environment or .env file before running.

If DATABASE_URL is not set, tools will return an error message indicating database is unavailable.

## Troubleshooting

### Tools not appearing in Claude Desktop

1. Verify the config file exists at ~/.claude/claude_desktop_config.json
2. Verify the path to dist/index.js is correct
3. Check that the MCP server was built (dist/ directory exists)
4. Restart Claude Desktop after config changes

### Database connection errors

1. Ensure PostgreSQL is running
2. Verify DATABASE_URL is set correctly
3. Run `pnpm --filter @everyskill/db db:push` to create tables
  </action>
  <verify>File exists at apps/mcp/README.md with Installation, Prerequisites, and Available Tools sections</verify>
  <done>README contains all installation steps and troubleshooting guidance</done>
</task>

</tasks>

<verification>
1. `cat apps/mcp/claude_desktop_config.example.json | jq .` - Valid JSON with mcpServers.everyskill-mcp
2. `grep -c "## Installation" apps/mcp/README.md` - Returns 1
3. `grep -c "claude_desktop_config" apps/mcp/README.md` - Returns at least 1
4. `wc -l apps/mcp/README.md` - At least 40 lines
</verification>

<success_criteria>
- Example Claude Desktop configuration file exists with correct structure
- README provides complete installation instructions
- User can follow README to configure Claude Desktop
- Documentation addresses all items from VERIFICATION.md gaps
</success_criteria>

<output>
After completion, create `.planning/phases/03-mcp-integration/03-05-SUMMARY.md`
</output>
