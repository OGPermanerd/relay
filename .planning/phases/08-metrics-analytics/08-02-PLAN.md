---
phase: 08-metrics-analytics
plan: 02
type: execute
wave: 2
depends_on: ["08-01", "08-03", "08-04"]
files_modified:
  - apps/web/app/(protected)/page.tsx
  - apps/web/components/stat-card.tsx
  - apps/web/components/leaderboard-table.tsx
  - apps/web/components/trending-section.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard shows platform-wide Contributors count"
    - "Dashboard shows platform-wide Total Downloads count"
    - "Dashboard shows platform-wide Total Uses count"
    - "Dashboard shows platform-wide FTE Days Saved"
    - "Dashboard shows Trending Skills section with recent popular skills"
    - "Dashboard shows Leaderboard section with top contributors"
  artifacts:
    - path: "apps/web/app/(protected)/page.tsx"
      provides: "Dashboard with parallel data fetching"
      min_lines: 80
    - path: "apps/web/components/stat-card.tsx"
      provides: "Reusable stat card component"
      min_lines: 15
    - path: "apps/web/components/leaderboard-table.tsx"
      provides: "Leaderboard display component"
      min_lines: 40
    - path: "apps/web/components/trending-section.tsx"
      provides: "Trending skills display component"
      min_lines: 30
  key_links:
    - from: "apps/web/app/(protected)/page.tsx"
      to: "apps/web/lib/platform-stats.ts"
      via: "getPlatformStats import"
      pattern: "getPlatformStats\\(\\)"
    - from: "apps/web/app/(protected)/page.tsx"
      to: "apps/web/lib/trending.ts"
      via: "getTrendingSkills import"
      pattern: "getTrendingSkills\\("
    - from: "apps/web/app/(protected)/page.tsx"
      to: "apps/web/lib/leaderboard.ts"
      via: "getLeaderboard import"
      pattern: "getLeaderboard\\("
---

<objective>
Create platform dashboard with metrics, trending, and leaderboard

Purpose: Display platform-wide value metrics and surface quality content to users
Output: Updated dashboard page with real data and new display components
</objective>

<execution_context>
@/home/claude/.claude/get-shit-done/workflows/execute-plan.md
@/home/claude/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-metrics-analytics/08-RESEARCH.md

# Prior plan SUMMARYs needed for service interfaces
@.planning/phases/08-metrics-analytics/08-01-SUMMARY.md
@.planning/phases/08-metrics-analytics/08-03-SUMMARY.md
@.planning/phases/08-metrics-analytics/08-04-SUMMARY.md

# Existing files
@apps/web/app/(protected)/page.tsx
@apps/web/components/skill-card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create display components</name>
  <files>apps/web/components/stat-card.tsx, apps/web/components/leaderboard-table.tsx, apps/web/components/trending-section.tsx</files>
  <action>
Create three display components for the dashboard.

**1. stat-card.tsx**
Simple stat card with label and value:
```typescript
interface StatCardProps {
  label: string;
  value: string | number;
  icon?: React.ReactNode;
}

export function StatCard({ label, value, icon }: StatCardProps) {
  return (
    <div className="rounded-lg bg-white p-6 shadow-sm">
      <div className="flex items-center gap-3">
        {icon && <div className="text-blue-600">{icon}</div>}
        <div>
          <p className="text-2xl font-bold text-gray-900">{value}</p>
          <p className="text-sm text-gray-500">{label}</p>
        </div>
      </div>
    </div>
  );
}
```

**2. leaderboard-table.tsx**
Import LeaderboardEntry type from lib/leaderboard.
Display table with columns: Rank, Contributor (name + avatar), Skills, Uses, Rating, FTE Days Saved.
Use Next.js Image for avatars with 32x32 size.
Show placeholder avatar for users without image.
Style with Tailwind - alternating row colors, hover state.

```typescript
import { LeaderboardEntry } from "@/lib/leaderboard";

interface LeaderboardTableProps {
  contributors: LeaderboardEntry[];
}

export function LeaderboardTable({ contributors }: LeaderboardTableProps) {
  // Table implementation
}
```

**3. trending-section.tsx**
Import TrendingSkill type from lib/trending.
Display as grid of skill cards (2 columns on lg, 1 on mobile).
Link each card to /skills/[slug].
Show: name, category badge, recent uses count, total uses.

```typescript
import { TrendingSkill } from "@/lib/trending";
import Link from "next/link";

interface TrendingSectionProps {
  skills: TrendingSkill[];
}

export function TrendingSection({ skills }: TrendingSectionProps) {
  if (skills.length === 0) {
    return <p className="text-gray-500">No trending skills yet. Start using skills to see what's popular!</p>;
  }
  // Grid implementation
}
```
  </action>
  <verify>
Run `cd /home/claude/projects/relay && pnpm tsc --noEmit -p apps/web/tsconfig.json` - no type errors
  </verify>
  <done>
Three display components created and compile without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Update dashboard page with real data</name>
  <files>apps/web/app/(protected)/page.tsx</files>
  <action>
Update the home page to be a real dashboard with platform statistics.

Changes:
1. Add imports:
```typescript
import { getPlatformStats } from "@/lib/platform-stats";
import { getTrendingSkills } from "@/lib/trending";
import { getLeaderboard } from "@/lib/leaderboard";
import { StatCard } from "@/components/stat-card";
import { LeaderboardTable } from "@/components/leaderboard-table";
import { TrendingSection } from "@/components/trending-section";
```

2. Fetch all data in parallel (Server Component pattern from research):
```typescript
const [stats, trending, leaderboard] = await Promise.all([
  getPlatformStats(),
  getTrendingSkills(6),
  getLeaderboard(5),
]);
```

3. Update page structure:
   - Keep welcome section with user's first name
   - Replace navigation cards section with:
     a. Platform Stats row: 4 StatCards in grid (Contributors, Downloads, Uses, FTE Days Saved)
     b. Two-column layout for Trending Skills (left, wider) and Top Contributors (right)
   - Keep "Your Impact" section at bottom but update with user-specific quick links

4. Use icons from Heroicons (inline SVG) for stat cards:
   - Contributors: user-group icon
   - Downloads: arrow-down-tray icon
   - Uses: play-circle icon
   - FTE Days: clock icon

5. Section headers: "Trending Skills" and "Top Contributors"

6. Keep existing navigation cards as a secondary row below stats (Profile, Share, Browse)

Layout structure:
```
[Welcome]
[Stat Cards: 4 across]
[Trending (2/3 width) | Leaderboard (1/3 width)]
[Navigation Cards: Profile, Share, Browse]
```

Use responsive grid classes: grid-cols-1 md:grid-cols-2 lg:grid-cols-4 for stats.
  </action>
  <verify>
Run `cd /home/claude/projects/relay && pnpm tsc --noEmit -p apps/web/tsconfig.json` - no type errors
  </verify>
  <done>
Dashboard fetches real data in parallel and displays platform stats, trending skills, and leaderboard
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes: `pnpm tsc --noEmit -p apps/web/tsconfig.json`
2. Dashboard imports and calls getPlatformStats, getTrendingSkills, getLeaderboard
3. StatCard, LeaderboardTable, TrendingSection components exist
4. Data fetching uses Promise.all for parallelism
</verification>

<success_criteria>
- Dashboard displays 4 platform stat cards with real data
- Trending section shows up to 6 trending skills
- Leaderboard shows top 5 contributors with rankings
- All data fetched in parallel for optimal performance
- Graceful handling when no trending skills or contributors exist
</success_criteria>

<output>
After completion, create `.planning/phases/08-metrics-analytics/08-02-SUMMARY.md`
</output>
