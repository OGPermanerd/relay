# Roadmap: EverySkill

## Milestones

- âœ… **v1.0 MVP** - Phases 1-8 (shipped 2026-01-31)
- âœ… **v1.1 Quality & Polish** - Phases 9-11 (shipped 2026-02-01)
- âœ… **v1.2 UI Redesign** - Phases 12-14 (shipped 2026-02-02)
- âœ… **v1.3 AI Quality & Cross-Platform** - Phases 15-19 (shipped 2026-02-04)
- âœ… **v1.4 Employee Analytics & Remote MCP** - Phases 20-24 (shipped 2026-02-06)
- âœ… **v1.5 Production, Multi-Tenancy & Reliable Usage Tracking** - Phases 25-33 (shipped 2026-02-08)
- âœ… **v2.0 Skill Ecosystem** - Phases 34-39 (shipped 2026-02-08)
- âœ… **v3.0 AI Discovery & Workflow Intelligence** - Phases 40-48 (shipped 2026-02-13)
- ðŸš§ **v4.0 Gmail Workflow Diagnostic** - Phases 49-54 (in progress)

## Phases

<details>
<summary>âœ… v1.0 MVP (Phases 1-8) - SHIPPED 2026-01-31</summary>

See archived roadmap: .planning/milestones/v1.0-ROADMAP.md

**Summary:**
- Phase 1: Project Foundation (4 plans)
- Phase 2: Authentication (3 plans)
- Phase 3: MCP Integration (6 plans)
- Phase 4: Data Model & Storage (5 plans)
- Phase 5: Skill Publishing (3 plans)
- Phase 6: Discovery (4 plans)
- Phase 7: Ratings & Reviews (3 plans)
- Phase 8: Metrics & Analytics (5 plans)

Total: 33 plans completed in 120 minutes.

</details>

<details>
<summary>âœ… v1.1 Quality & Polish (Phases 9-11) - SHIPPED 2026-02-01</summary>

See archived roadmap: .planning/milestones/v1.1-ROADMAP.md

**Summary:**
- Phase 9: Tag Filtering (1 plan)
- Phase 10: Quality Scorecards (4 plans)
- Phase 11: E2E Test Coverage (4 plans)

Total: 9 plans completed in 45 minutes.

</details>

<details>
<summary>âœ… v1.2 UI Redesign (Phases 12-14) - SHIPPED 2026-02-02</summary>

See archived roadmap: .planning/milestones/v1.2-ROADMAP.md

**Summary:**
- Phase 12: Two-Panel Layout Foundation (3 plans)
- Phase 13: Interactive Sorting & Accordion (4 plans)
- Phase 14: Mobile & Accessibility Polish (5 plans)

Total: 12 plans completed.

</details>

<details>
<summary>âœ… v1.3 AI Quality & Cross-Platform (Phases 15-19) - SHIPPED 2026-02-04</summary>

See archived roadmap: .planning/milestones/v1.3-ROADMAP.md

**Summary:**
- Phase 15: Embeddings Foundation (4 plans)
- Phase 16: Similarity Detection (2 plans)
- Phase 17: AI Review Pipeline (3 plans)
- Phase 18: Fork-Based Versioning (2 plans)
- Phase 19: Cross-Platform Install (2 plans)

Total: 15 plans completed.

</details>

<details>
<summary>âœ… v1.4 Employee Analytics & Remote MCP (Phases 20-24) - SHIPPED 2026-02-06</summary>

See archived roadmap: .planning/milestones/v1.4-ROADMAP.md

**Summary:**
- Phase 20: API Key Management (7 plans)
- Phase 21: Employee Usage Tracking (6 plans)
- Phase 22: Web Remote MCP (3 plans)
- Phase 23: Analytics Dashboard (7 plans)
- Phase 24: Extended MCP Search (2 plans)

Total: 25 plans completed.

</details>

<details>
<summary>âœ… v1.5 Production, Multi-Tenancy & Reliable Usage Tracking (Phases 25-33) - SHIPPED 2026-02-08</summary>

See archived roadmap: .planning/milestones/v1.5-ROADMAP.md

**Summary:**
- Phase 25: Multi-Tenancy Schema & Audit Foundation (9 plans)
- Phase 26: Auth & Subdomain Routing (3 plans)
- Phase 27: Production Docker Deployment (4 plans)
- Phase 28: Hook-Based Usage Tracking (7 plans)
- Phase 29: Tenant-Scoped Analytics & MCP (3 plans)
- Phase 30: Branding & Navigation (7 plans)
- Phase 31: Skills & Upload Enhancements (6 plans)
- Phase 32: Admin Panel (6 plans)
- Phase 33: Email & Notifications (7 plans)

Total: 55 plans completed.

</details>

<details>
<summary>âœ… v2.0 Skill Ecosystem (Phases 34-39) - SHIPPED 2026-02-08</summary>

See archived roadmap: .planning/milestones/v2.0-ROADMAP.md

**Summary:**
- Phase 34: Review Pipeline Foundation (5 plans)
- Phase 35: AI Review Integration (3 plans)
- Phase 36: Admin Review UI (3 plans)
- Phase 37: Review Notifications (4 plans)
- Phase 38: Conversational MCP Discovery (4 plans)
- Phase 39: Fork Detection (4 plans)

Total: 23 plans completed. 44 requirements across 6 categories.

</details>

<details>
<summary>âœ… v3.0 AI Discovery & Workflow Intelligence (Phases 40-48) - SHIPPED 2026-02-13</summary>

See archived roadmap: .planning/milestones/v3.0-ROADMAP.md

**Summary:**
- Phase 40: Visibility Scoping (4 plans)
- Phase 41: Loom Video Integration (2 plans)
- Phase 42: MCP Tool Unification (2 plans)
- Phase 43: User Preferences (3 plans)
- Phase 44: Admin Global Skills (2 plans)
- Phase 45: Hybrid Search & Discovery (3 plans)
- Phase 46: Search Analytics (2 plans)
- Phase 47: Homepage Research (1 plan)
- Phase 48: Homepage Redesign (2 plans)

Total: 21 plans completed. 9 phases, 26 requirements.

</details>

### ðŸš§ v4.0 Gmail Workflow Diagnostic (In Progress)

**Milestone Goal:** Transform EverySkill from a passive skill catalog into a proactive workflow advisor -- connect to Gmail, analyze email patterns with AI, and recommend skills that save the most time, with a visual dashboard and deployment plan. Privacy-first: analyze and discard raw data, persist only aggregates.

**Phase Numbering:**
- Integer phases (49, 50, ...): Planned milestone work
- Decimal phases (49.1, 49.2): Urgent insertions (marked with INSERTED)

- [x] **Phase 49: Tenant Resolution Cleanup** - Eliminate DEFAULT_TENANT_ID hardcoding across codebase
- [x] **Phase 50: Gmail OAuth Infrastructure** - Separate OAuth flow for Gmail with encrypted token storage
- [ ] **Phase 51: Email Analysis Pipeline** - Fetch, classify, and aggregate 90 days of email metadata
- [ ] **Phase 52: Diagnostic Dashboard** - Visual email time breakdown with charts and KPIs
- [ ] **Phase 53: Skill Recommendations** - AI-powered skill matching based on email patterns
- [ ] **Phase 54: Deployment Plan** - Ranked adoption sequence with projected time savings

#### Phase 49: Tenant Resolution Cleanup
**Goal**: All code paths resolve tenant from the authenticated session, eliminating the hardcoded DEFAULT_TENANT_ID constant
**Depends on**: Nothing (foundation cleanup, must precede new tables)
**Requirements**: CLEAN-01
**Success Criteria** (what must be TRUE):
  1. No code path references the DEFAULT_TENANT_ID constant for runtime tenant resolution -- every query, insert, and filter derives tenant from the user session
  2. All existing functionality (skills CRUD, search, analytics, MCP, admin) continues working identically after the change -- no regressions in E2E tests
  3. A new user signing in for the first time is correctly assigned to a tenant via the existing domain-to-tenant mapping without any hardcoded fallback
**Plans:** 3 plans
Plans:
- [x] 49-01-PLAN.md -- Test infrastructure + utility function signature changes
- [x] 49-02-PLAN.md -- Server actions + server components + DB service tenant resolution
- [x] 49-03-PLAN.md -- MCP tools + API routes tenant resolution

#### Phase 50: Gmail OAuth Infrastructure
**Goal**: Users can securely connect and disconnect their Gmail account via a dedicated OAuth flow, with encrypted token storage and admin control
**Depends on**: Phase 49 (tenant resolution must be dynamic before adding new tenant-scoped tables)
**Requirements**: GMAIL-01, GMAIL-02, GMAIL-03, GMAIL-04, GMAIL-05, GMAIL-06
**Success Criteria** (what must be TRUE):
  1. User can click "Connect Gmail" on a settings page, complete a Google OAuth consent flow requesting `gmail.readonly` scope, and return to see their Gmail shown as connected
  2. Gmail OAuth tokens are stored in a dedicated `gmail_tokens` table with AES-256-GCM encryption at rest -- access tokens, refresh tokens, and expiry timestamps are never stored in plaintext
  3. User can click "Disconnect Gmail" and all tokens are immediately deleted from the database and revoked with Google, with the UI reverting to "not connected" state
  4. Token refresh happens automatically and race-condition-safely when access tokens expire, so returning users never see auth errors
  5. Admin can toggle the Gmail diagnostic feature on/off per tenant from the admin panel, and when disabled, the "Connect Gmail" option is hidden for that tenant's users
**Plans:** 3 plans
Plans:
- [x] 50-01-PLAN.md -- Schema, crypto, migration, and gmail token service
- [x] 50-02-PLAN.md -- OAuth API routes (connect, callback, disconnect, status) and middleware
- [x] 50-03-PLAN.md -- Settings connections UI and admin toggle

#### Phase 51: Email Analysis Pipeline
**Goal**: The system fetches 90 days of email headers, classifies them into categories using rules and AI, estimates time spent, and stores only anonymous aggregate results
**Depends on**: Phase 50 (Gmail tokens must exist to make API calls)
**Requirements**: ANAL-01, ANAL-02, ANAL-03, ANAL-04, ANAL-05, ANAL-06
**Success Criteria** (what must be TRUE):
  1. User can trigger a diagnostic scan that fetches email metadata (From, Subject, Date, List-Unsubscribe headers) for the last 90 days via Gmail API using `gmail.readonly` scope with `format: 'metadata'` -- no email bodies are ever accessed
  2. Emails are categorized into distinct types (newsletters, notifications, internal threads, external correspondence, meetings, action items) with rule-based classification handling ~70% and Claude AI classifying the remaining ~30% ambiguous emails
  3. Time estimates are calculated per category using a transparent heuristic model (category-weighted base time multiplied by thread depth and reply factors), producing a total weekly email hours estimate
  4. After analysis completes, only aggregate statistics (counts, percentages, time estimates per category) are persisted in the database -- raw email metadata is discarded and never written to any persistent storage
  5. The scan handles large mailboxes gracefully with batched API calls, date-range filtering, sampling for 5000+ message mailboxes, and a progress indicator during the 60-90 second analysis
**Plans**: 5 plans
Plans:
- [ ] 51-01-PLAN.md -- Schema and service for email_diagnostics table (aggregate-only storage)
- [ ] 51-02-PLAN.md -- Gmail client: fetch email metadata with batching and pagination
- [ ] 51-03-PLAN.md -- Two-pass email classifier (rule-based + AI)
- [ ] 51-04-PLAN.md -- Time estimator + aggregator + server action orchestrator
- [ ] 51-05-PLAN.md -- Diagnostic card UI with progress indicator

#### Phase 52: Diagnostic Dashboard
**Goal**: Users see a visual breakdown of where their email time goes, with clear charts and the ability to re-run the analysis
**Depends on**: Phase 51 (aggregate diagnostic data must exist to display)
**Requirements**: DASH-01, DASH-02, DASH-03, DASH-04
**Success Criteria** (what must be TRUE):
  1. Diagnostic dashboard page displays an email category breakdown chart (Recharts PieChart or BarChart) showing the distribution of email types with counts and percentages
  2. A "screentime"-style time-per-category visualization shows how many hours per week each email category consumes, with the total estimated weekly email hours displayed prominently as a hero KPI
  3. User can click "Re-run Diagnostic" to trigger a fresh 90-day analysis, and the dashboard updates with the new results, showing the date of the last scan
**Plans**: TBD

#### Phase 53: Skill Recommendations
**Goal**: AI analyzes the user's email patterns and recommends specific EverySkill skills that would save them the most time, with personalized reasoning
**Depends on**: Phase 51 (diagnostic results needed for matching), Phase 52 can run in parallel if files are separate
**Requirements**: RECO-01, RECO-02, RECO-03
**Success Criteria** (what must be TRUE):
  1. After a diagnostic scan, Claude AI analyzes the user's email category breakdown and generates search queries that map each high-time category to potential skill automation opportunities, using existing hybrid search to find matching skills
  2. Top 3-5 skill recommendations are displayed with personalized explanations (e.g., "You spend 4.2 hrs/week on newsletters -- this Email Digest skill could automate summarization and save ~3 hrs/week")
  3. Each recommendation card includes a one-click install button that launches the existing install flow, so users can go from insight to deployment without leaving the diagnostic page
**Plans**: TBD

#### Phase 54: Deployment Plan
**Goal**: Users see a prioritized skill adoption roadmap with projected cumulative time savings
**Depends on**: Phase 53 (skill recommendations must exist to sequence)
**Requirements**: PLAN-01, PLAN-02, PLAN-03
**Success Criteria** (what must be TRUE):
  1. A ranked skill adoption list orders recommended skills by estimated time savings (highest ROI first), with each entry showing the skill name, matched email category, and projected hours saved per week
  2. A cumulative FTE Days Saved projection chart (Recharts AreaChart) shows expected savings accumulating over time as each skill is adopted in sequence
  3. A sequential "start here" adoption order suggests which skill to try first with clear reasoning, guiding users from their biggest time sink to progressively smaller ones
**Plans**: TBD

#### Dependency Graph

```
Phase 49 (Tenant Cleanup) â”€â”€> Phase 50 (Gmail OAuth) â”€â”€> Phase 51 (Email Analysis)
                                                                    â”‚
                                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                          v        v
                                                  Phase 52 (Dashboard)  Phase 53 (Recommendations)
                                                                                  â”‚
                                                                                  v
                                                                        Phase 54 (Deployment Plan)
```

**Parallel execution opportunities:**
- Wave 1: Phase 49 (Tenant Cleanup -- must be first)
- Wave 2: Phase 50 (Gmail OAuth -- depends on 49)
- Wave 3: Phase 51 (Email Analysis -- depends on 50)
- Wave 4: Phase 52 + Phase 53 (Dashboard + Recommendations -- both depend on 51, can parallelize if separate files)
- Wave 5: Phase 54 (Deployment Plan -- depends on 53)

**Note:** This milestone is mostly sequential because each phase builds on the previous one's data layer. The only parallelization opportunity is Wave 4 (dashboard visualization and AI recommendation logic touch different files).

## Progress

**Execution Order:**
Phases execute respecting dependencies: 49 -> 50 -> 51 -> 52/53 (parallel) -> 54

| Phase | Milestone | Plans Complete | Status | Completed |
|-------|-----------|----------------|--------|-----------|
| 1-8 | v1.0 | 33/33 | Complete | 2026-01-31 |
| 9-11 | v1.1 | 9/9 | Complete | 2026-02-01 |
| 12-14 | v1.2 | 12/12 | Complete | 2026-02-02 |
| 15-19 | v1.3 | 15/15 | Complete | 2026-02-04 |
| 20-24 | v1.4 | 25/25 | Complete | 2026-02-06 |
| 25-33 | v1.5 | 55/55 | Complete | 2026-02-08 |
| 34-39 | v2.0 | 23/23 | Complete | 2026-02-08 |
| 40-48 | v3.0 | 21/21 | Complete | 2026-02-13 |
| 49. Tenant Cleanup | v4.0 | 3/3 | Complete | 2026-02-14 |
| 50. Gmail OAuth | v4.0 | 3/3 | Complete | 2026-02-14 |
| 51. Email Analysis | v4.0 | 0/5 | Not started | - |
| 52. Dashboard | v4.0 | 0/TBD | Not started | - |
| 53. Recommendations | v4.0 | 0/TBD | Not started | - |
| 54. Deployment Plan | v4.0 | 0/TBD | Not started | - |

**Total: 203 plans completed across 50 phases and 9 milestones. v4.0: 6 plans done, 2/6 phases complete.**

---
*Roadmap created: 2026-01-31*
*v1.0 completed: 2026-01-31*
*v1.1 completed: 2026-02-01*
*v1.2 completed: 2026-02-02*
*v1.3 completed: 2026-02-04*
*v1.4 completed: 2026-02-06*
*v1.5 completed: 2026-02-08*
*v2.0 completed: 2026-08*
*v3.0 completed: 2026-02-13*
*v4.0 roadmap created: 2026-02-14*
